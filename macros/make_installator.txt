cmake_minimum_required(VERSION 2.8)

find_path(MINGW_BINARY_DIR mingwm10.dll  PATHS ${MINGW_BINARY_DIR} ENV PATH)

if (NOT MINGW_BINARY_DIR STREQUAL "MINGW_BINARY_DIR-NOTFOUND")
	MESSAGE(STATUS "MinGW Binaries : " ${MINGW_BINARY_DIR})
else (NOT MINGW_BINARY_DIR STREQUAL "MINGW_BINARY_DIR-NOTFOUND")
	MESSAGE(FATAL_ERROR "MinGW binaries not found!")
endif (NOT MINGW_BINARY_DIR STREQUAL "MINGW_BINARY_DIR-NOTFOUND")

ind_program (vfb_exe vfb)
MESSAGE (STATUS "VFB: " ${vfb_exe})

execute_process (COMMAND ${vfb_exe} OUTPUT_VARIABLE RELEASE_VERSION ERROR_VARIABLE RELEASE_VERSION_ERROR OUTPUT_STRIP_TRAILING_WHITESPACE)
MESSAGE (STATUS ${RELEASE_VERSION})

configure_file(zarlok_installer.iss.in zarlok_installer.iss)